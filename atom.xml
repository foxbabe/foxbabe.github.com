<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[FoxBabe Dev Blog]]></title>
  <link href="http://foxbabe.github.com/atom.xml" rel="self"/>
  <link href="http://foxbabe.github.com/"/>
  <updated>2014-11-04T00:39:16+08:00</updated>
  <id>http://foxbabe.github.com/</id>
  <author>
    <name><![CDATA[FoxBabe]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[iOS代码库]]></title>
    <link href="http://foxbabe.github.com/blog/20141103/iosdai-ma-ku.html/"/>
    <updated>2014-11-03T23:53:21+08:00</updated>
    <id>http://foxbabe.github.com/blog/20141103/iosdai-ma-ku</id>
    <content type="html"><![CDATA[<h2>说明</h2>

<h3>版本信息</h3>

<ul>
<li>2014.07.30 V1.0 创建iOS代码库文档初版</li>
</ul>


<h3>创建iOS代码库目的</h3>

<ul>
<li>整理项目中常见控件和功能，提高项目间功能复用度</li>
<li>便于iOS工程师之间的技术交流，增强公司内部技术分享沟通氛围</li>
<li>便于初级iOS工程师尽快提升iOS技术开发能力</li>
</ul>


<h3>iOS代码库简介</h3>

<p><img src="http://workplace.qiniudn.com/QQ20140730-1.png" alt="代码库简介" /></p>

<p>TTILibrary
- Category (常用扩展)
- Helper (常用工具类)
- Macro (公共宏和第三方参数宏)
- NetWork(网络相关操作)
- UI(常用控件)
iOSCodeProject (项目名称，可根据实际进行修改)
- Resource (项目中常用资源)
- Depend （常用依赖库）
- Models (对象数据)
- Views （项目中共用控件）
- Controlers （项目中的控制器层）</p>

<hr />

<h2>UI控件类</h2>

<h3>列表下拉刷新和上拉加载更多</h3>

<p>使用PullingRefreshTableView实现上下拉动和分页效果，基本使用：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>//创建列表
</span><span class='line'>self.pullTable = [[PullingRefreshTableView alloc] init];
</span><span class='line'>self.pullTable.frame = self.view.bounds;
</span><span class='line'>self.pullTable.delegate=self;
</span><span class='line'>self.pullTable.dataSource = self;
</span><span class='line'>self.pullTable.pullingDelegate = self;
</span><span class='line'>self.pullTable.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleBottomMargin;
</span><span class='line'>[self.view addSubview:self.pullTable];
</span><span class='line'>   
</span><span class='line'>//设置委托
</span><span class='line'>#pragma mark - UIScrollView Delegate
</span><span class='line'>-(void)scrollViewDidScroll:(UIScrollView *)scrollView
</span><span class='line'>{
</span><span class='line'>[_pullTable tableViewDidScroll:scrollView];
</span><span class='line'>}
</span><span class='line'>- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
</span><span class='line'>{
</span><span class='line'>[_pullTable tableViewDidEndDragging:scrollView];
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
</span><span class='line'>{
</span><span class='line'>return [_sourceArray count];
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
</span><span class='line'>static NSString *CellIdentifier = @"cell";
</span><span class='line'>UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
</span><span class='line'>if (cell==nil) {
</span><span class='line'>    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
</span><span class='line'>    cell.selectionStyle = UITableViewCellSelectionStyleNone;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>cell.textLabel.text = _sourceArray[indexPath.row];
</span><span class='line'>
</span><span class='line'>return cell;
</span><span class='line'>
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>#pragma  mark - PullingRefreshTableView Delegate
</span><span class='line'>-(void)pullingTableViewDidStartRefreshing:(PullingRefreshTableView *)tableView
</span><span class='line'>{
</span><span class='line'>[self refreshAction];
</span><span class='line'>}
</span><span class='line'>-(void)pullingTableViewDidStartLoading:(PullingRefreshTableView *)tableView
</span><span class='line'>{
</span><span class='line'>[self loadingAction];
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>//处理刷新事件
</span><span class='line'>-(void)refreshAction
</span><span class='line'>{
</span><span class='line'>[self.sourceArray insertObject:@"下拉刷新" atIndex:0];
</span><span class='line'>[self performSelector:@selector(stopRefresh) withObject:nil afterDelay:1.5f];
</span><span class='line'>
</span><span class='line'>}
</span><span class='line'>-(void)loadingAction
</span><span class='line'>{
</span><span class='line'>[self.sourceArray addObject:@"上拉加载更多"];
</span><span class='line'>[self performSelector:@selector(stopRefresh) withObject:nil afterDelay:1.5f];
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>-(void)stopRefresh{
</span><span class='line'>[_pullTable tableViewDidFinishedLoading];
</span><span class='line'>[_pullTable reloadData];
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<h3>图片缩放和图片浏览器</h3>

<p>图片的缩放和图片浏览器采用MWPhotoBrowser来实现，使用方法参考工程</p>

<h3>自定义索引栏/通讯录列表；</h3>

<p>对于常见的通讯录，部分项目上希望自定义索引兰的文字颜色、字体和背景
 - 支持修改索引兰文字颜色、字体和大小
 - 支持点击索引兰，处于高亮状态时的背景颜色</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>//创建索引兰
</span><span class='line'>TTIIndexBar *indexBar = [[TTIIndexBar alloc] initWithFrame:CGRectMake
</span><span class='line'>                         (self.view.frame.size.width-35, 10.0, 28.0, self.view.frame.size.height-80)];
</span><span class='line'>indexBar.textColor = [UIColor greenColor];      //索引栏文字颜色
</span><span class='line'>indexBar.highlightedBackgroundColor = [UIColor redColor];       //高亮选中背景的颜色
</span><span class='line'>[indexBar setIndexes:[NSMutableArray arrayWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G", nil]];
</span><span class='line'>indexBar.delegate = self;
</span><span class='line'>[self.view addSubview:indexBar];
</span><span class='line'>
</span><span class='line'>//处理索引兰事件
</span><span class='line'>#pragma mark - TTIIndexBarDelegate methods
</span><span class='line'>- (void)indexSelectionDidChange:(TTIIndexBar *)indexBar index:(NSInteger)index title:(NSString*)title{
</span><span class='line'>
</span><span class='line'>NSLog(@"%d %@",index,title);
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<h3>GIF加载</h3>

<ul>
<li>使用YLGIFImage加载GIF方便快速</li>
<li>占用内存少</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>YLImageView* imageView = [[YLImageView alloc] initWithFrame:CGRectMake(0, 160, 320, 240)];
</span><span class='line'>[self.view addSubview:imageView];
</span><span class='line'>imageView.image = [YLGIFImage imageNamed:@"joy.gif"];</span></code></pre></td></tr></table></div></figure>


<h3>自定义选择器（时间、字符串）</h3>

<p>使用系统的选取和toolbar自定义常用的时间和字符串选择器</p>

<ul>
<li>字符串选择器</li>
<li>时间选择器</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>//选择字符串
</span><span class='line'>TTIPickerView *pickerView  = [[TTIPickerView alloc] init];
</span><span class='line'>pickerView.sourceArray = [NSMutableArray arrayWithArray:
</span><span class='line'> @[@"测试1",@"测试2",@"测试3",@"测试4",@"测试5",@"测试6"]];
</span><span class='line'>[pickerView show:^(NSInteger row, NSString *titleOfRow) {
</span><span class='line'>    NSLog(@"%d %@",row,titleOfRow);
</span><span class='line'>}];
</span><span class='line'>    
</span><span class='line'>//选择时间
</span><span class='line'>TTIDateView *dateView = [[TTIDateView alloc] init];
</span><span class='line'>[dateView show:^(NSString *dateString) {
</span><span class='line'>    NSLog(@"%@",dateString);
</span><span class='line'>}];
</span><span class='line'>    </span></code></pre></td></tr></table></div></figure>


<h3>iOS7风格的Switch</h3>

<p>项目中通常会设计为iOS7风格的switch，但是在iOS6上的效果和iOS7上是有一定差异的，该控制支持此功能。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>SevenSwitch *swich = [[SevenSwitch alloc] initWithFrame: CGRectMake(260, 10, 50, 30)];
</span><span class='line'>[self.view addSubview: swich];</span></code></pre></td></tr></table></div></figure>


<h3>富文本控件</h3>

<p><img src="http://workplace.qiniudn.com/QQ20140730-3.png" alt="富文本效果" /></p>

<ul>
<li>支持显示不同字体、不同颜色和大小的富文本控件</li>
<li>支持hmtl标签形式</li>
<li>支持图片居中显示</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>//创建富文本控件
</span><span class='line'>    self.scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
</span><span class='line'>  self.scrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
</span><span class='line'>    
</span><span class='line'>    self.coreTextView = [[FTCoreTextView alloc] initWithFrame:CGRectInset(bounds, 20.0f, 0)];
</span><span class='line'>  self.coreTextView.autoresizingMask = UIViewAutoresizingFlexibleWidth |
</span><span class='line'>    UIViewAutoresizingFlexibleHeight;
</span><span class='line'>    
</span><span class='line'>    //添加风格
</span><span class='line'>    [self.coreTextView addStyles:[self coreTextStyle]];
</span><span class='line'>    
</span><span class='line'>    //设置文本
</span><span class='line'>    self.coreTextView.text = [self textForView];
</span><span class='line'>    self.coreTextView.delegate = self;
</span><span class='line'>   
</span><span class='line'>    [self.scrollView addSubview:self.coreTextView];
</span><span class='line'>    [self.view addSubview:self.scrollView];
</span><span class='line'>    
</span><span class='line'>    //更多用法可参考:https://github.com/FuerteInternational/FTCoreText
</span><span class='line'>    
</span><span class='line'>    //可自定义设置多种样式</span></code></pre></td></tr></table></div></figure>


<h3>云标签</h3>

<p>云标签效果图</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>NSArray *labelARy =[NSArray arrayWithObjects:@"吃惊威龙",@"摧残人僧",@"赏金杀手",@"疯狂原始人",@"神偷奶爸",@"致命黑兰",@"冥界警局",@"狂鲨之灾",@"北海巨妖",@"海扁王2",@"变形金刚3",@"史前一亿年",@"大片",nil];
</span><span class='line'>   
</span><span class='line'> //创建云标签 
</span><span class='line'>CloudView *cv=[[CloudView alloc] initWithFrame:CGRectMake(0, 0, 320, 320)];
</span><span class='line'>[cv reloadData:labelARy];
</span><span class='line'>[self.view addSubview:cv];
</span><span class='line'>[cv setBackgroundColor: [UIColor blackColor]];</span></code></pre></td></tr></table></div></figure>


<h3>广告页Banners循环滚动效果</h3>

<p>采用类似UItableview的委托形式，创建支持循环滚动的Banners效果控件</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>self.cycleScrollView = [[TTICycleScrollView alloc] initWithFrame:CGRectMake(0, 30, 320, 100)];
</span><span class='line'>self.cycleScrollView.delegate = self;
</span><span class='line'>self.cycleScrollView.datasource = self;
</span><span class='line'>[self.view addSubview:self.cycleScrollView];
</span><span class='line'>
</span><span class='line'>    
</span><span class='line'>    for (int i = 0; i &lt; 10; i++) {
</span><span class='line'>        NSString *num = [NSString stringWithFormat:@"%d_index",i + 1];
</span><span class='line'>        [self.dataSource addObject:num];
</span><span class='line'>    }
</span><span class='line'>    
</span><span class='line'>    [self.cycleScrollView reloadData];
</span><span class='line'>    
</span><span class='line'>    //设置代理和数据源
</span><span class='line'>    #pragma mark - TTICycleScrollViewDelegate methods
</span><span class='line'>- (void)didClickPage:(TTICycleScrollView *)csView atIndex:(NSInteger)index{
</span><span class='line'>
</span><span class='line'>    //点击事件
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>#pragma mark - TTICycleScrollViewDatasource methods
</span><span class='line'>- (NSInteger)numberOfPages{
</span><span class='line'>
</span><span class='line'>    return self.dataSource.count;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>- (UIView *)pageAtIndex:(NSInteger)index{
</span><span class='line'>
</span><span class='line'>//这里的视图可以根据实际情况自定义
</span><span class='line'>    UILabel *tip = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 100)];
</span><span class='line'>    if (index%3 == 0) {
</span><span class='line'>        tip.backgroundColor = [UIColor redColor];
</span><span class='line'>    }else if (index%3 == 1){
</span><span class='line'>        tip.backgroundColor = [UIColor grayColor];
</span><span class='line'>    }else{
</span><span class='line'>        tip.backgroundColor = [UIColor greenColor];
</span><span class='line'>    }
</span><span class='line'>    
</span><span class='line'>    tip.text = [self.dataSource objectAtIndex:index];
</span><span class='line'>    tip.textColor = [UIColor blackColor];
</span><span class='line'>    tip.textAlignment = NSTextAlignmentCenter;
</span><span class='line'>    
</span><span class='line'>    return tip;
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<h3>饼图、折线图、条形图</h3>

<p>使用开源PNChart控件(<a href="https://github.com/kevinzhow/PNChart">https://github.com/kevinzhow/PNChart</a>)和自定义的TTIGoalBar实现三种风格图标</p>

<h3>自由截图视图</h3>

<p>截图当前屏幕的图片</p>

<h3>拼音视图</h3>

<p>中文转换为拼音</p>

<h3>自定义的控制器、导航控制器和标签栏控制器</h3>

<p>继承系统的UIViewController、UINavagationContoller和UITabbarController，支持更多自定义操作，满足实际项目需求</p>

<h3>瀑布流和分页加载</h3>

<p>使用PSCollectionView和顶部、尾部加载控件，实现瀑布流和分页加载效果</p>

<h3>自定义评分控件</h3>

<p>支持评分和仅显示星级数功能</p>

<h3>自定义滑动cell</h3>

<ul>
<li>支持自定义滑动删除时的视图</li>
<li>支持ios6上的滑动删除</li>
</ul>


<h3>自定义TextView和TextFIled</h3>

<ul>
<li>支持TextFIled修改placeholder的文字颜色</li>
<li>支持TextView添加placeholder功能和修改文字颜色</li>
</ul>


<h3>自定义PageControl</h3>

<ul>
<li>支持自定义pagecontrol的颜色大小和间距</li>
</ul>


<hr />

<h2>功能类</h2>

<h3>拍照/拍视频/录音</h3>

<p>提供常见的拍照、拍适配和录音频的操作</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>//选择图片
</span><span class='line'>    WEAKSELF
</span><span class='line'>    [[TTIImagePickerManager shareInstance] imagePickerWithType:TTIImagePickerManagerBoth enableEditing:YES withDelegate:self comleteBlock:^(UIImage *resultImage, UIImage *orignImage) {
</span><span class='line'>       
</span><span class='line'>        weakSelf.selectImage.image = resultImage;
</span><span class='line'>        
</span><span class='line'>    } failedBlock:^(NSError *error) {
</span><span class='line'>        
</span><span class='line'>    }];
</span><span class='line'>    
</span><span class='line'>    //选择视频
</span><span class='line'>        [[TTIVideoPickerManager shareInstance] videoPickerWithType:TTIVideoPickerManagerBoth withDelegate:self isConvertMP4:NO comleteBlock:^(NSString *resultPath, NSString *orignPath) {
</span><span class='line'>        
</span><span class='line'>        NSLog(@"视频地址:%@",resultPath);
</span><span class='line'>        
</span><span class='line'>    } failedBlock:^(NSError *error) {
</span><span class='line'>        
</span><span class='line'>    }];
</span><span class='line'>    
</span><span class='line'>    //选择音频
</span><span class='line'>     [[TTIAudioPickerManager shareInstance] audioPickerWithType:TTIAudioPickerManagerBoth withDelegate:self isConvertMP3:YES comleteBlock:^(NSString *resultPath, NSString *orignPath) {
</span><span class='line'>        
</span><span class='line'>        NSLog(@"音频地址:%@",resultPath);
</span><span class='line'>        
</span><span class='line'>    } failedBloc:^(NSError *error) {
</span><span class='line'>        
</span><span class='line'>    }];
</span><span class='line'>    </span></code></pre></td></tr></table></div></figure>


<h3>打电话、发短信、发邮件</h3>

<p>常见工具操作</p>

<h3>二维码扫描</h3>

<p>使用ZBar进行二维码扫描功能</p>

<h3>ZIP文件的解压与压缩</h3>

<p>对于数据包的形式，通常需要进行文件的压缩和解压</p>

<h3>应用内语言切换</h3>

<p>强制在程序内部进行语言切换</p>

<hr />

<h2>工具类</h2>

<h3>字符串处理</h3>

<ul>
<li>去除前后空格</li>
<li>字符串为空的判断</li>
<li>字符串转各种数值类型
具体请见代码库中：NSString+Category.h扩展类</li>
</ul>


<h3>图片工具类</h3>

<ul>
<li>倒影效果</li>
<li>取特定位置</li>
<li>转换成指定大小的图片</li>
<li>等比缩放</li>
<li>获取本地图片
具体请见代码库中：UIImage+Utils.h扩展类</li>
</ul>


<h3>日志工具类</h3>

<ul>
<li>保存异常信息</li>
<li>记录奔溃设备的信息
已弃用，使用友盟错误分析进行统计</li>
</ul>


<h3>日期工具类</h3>

<ul>
<li>字符串转日期</li>
<li>字符串日期的大小对比</li>
<li>相差几天的对比</li>
<li>判断是否在本周/上周/两周前</li>
<li>与当前时间判断为”刚刚/几分钟前/几天前/几月前</li>
<li>&hellip;
具体请见代码库中：NSDate+Utils.h扩展类</li>
</ul>


<h3>验证工具类</h3>

<p>常用数据格式判断
 - 手机号
 - 邮箱
 - 身份证
 - 电话
 - 纯数字
 - 用户名和昵称
 - &hellip;</p>

<h3>字体工具类</h3>

<ul>
<li>显示系统所有字体信息</li>
<li>加载自定义字体</li>
<li>程序字体统一处理</li>
<li>加粗和斜体等字体操作</li>
</ul>


<h3>对话框工具类</h3>

<ul>
<li>UIAlterView支持block，避免多个弹出框时多个tag区分</li>
<li>支持多种情况的block</li>
</ul>


<h3>加密处理</h3>

<ul>
<li>MD5加密</li>
<li>AES加密解密</li>
<li>BASE64 编码</li>
<li>&hellip;</li>
</ul>


<h3>视图工具类</h3>

<ul>
<li>单独设置x/y/width/height</li>
<li>直接获取各种位置信息</li>
<li>直接记载nib文件
具体请见代码库中：UIView+Utils.h扩展类</li>
</ul>


<h3>动画工具类</h3>

<ul>
<li>平移</li>
<li>翻转</li>
<li>摇晃</li>
<li>渐隐渐现</li>
<li>&hellip;.
具体请见代码库中：UIView+AnimationUtils.h扩展类</li>
</ul>


<hr />

<h2>动画类</h2>

<h3>磨盘效果控件</h3>

<ul>
<li>吉利汽车，车型展示效果</li>
<li>qq游戏大厅，游戏项目转动效果</li>
</ul>


<h3>3D画廊</h3>

<ul>
<li>印象城中首页活动切换效果</li>
<li>印象城中楼层切换效果</li>
</ul>


<h3>360、720度全景</h3>

<ul>
<li>360度图片展示</li>
<li>720度全景图展示</li>
</ul>


<h3>导航控制器切换效果</h3>

<ul>
<li>支持滑动返回分层效果</li>
</ul>


<h3>抽屉效果</h3>

<ul>
<li>左右滑动抽屉效果</li>
</ul>


<hr />

<h2>数据存储</h2>

<h3>使用UserDefaults存储用户信息</h3>

<ul>
<li>存储用户配置信息</li>
<li>存储本地对象，需支持NSCopying</li>
</ul>


<h3>使用Plist存储信息</h3>

<ul>
<li>本地文件储存（plist即xml文件）</li>
<li>KV（Key-Vaule）形式进行存储</li>
<li>支持NSString/NSArray/NSDictionary迅速储存</li>
</ul>


<h3>SQList数据操作存储，采用FMDB操作</h3>

<ul>
<li>采用FMDB，非常方便操作sqlite数据库</li>
<li>常见SQL操作语句，可参考（<a href="https://github.com/ccgus/fmdb%EF%BC%89">https://github.com/ccgus/fmdb%EF%BC%89</a></li>
</ul>


<h3>CoreData数据存储</h3>

<hr />

<h2>网络操作</h2>

<h3>数据对象操作（自动映射）</h3>

<p>使用开源控件JSONModel（<a href="https://github.com/icanzilb/JSONModel%EF%BC%89%E5%AE%8C%E6%88%90%EF%BC%8C%E6%94%AF%E6%8C%81%E5%A6%82%E4%B8%8B%E5%8A%9F%E8%83%BD%EF%BC%9A">https://github.com/icanzilb/JSONModel%EF%BC%89%E5%AE%8C%E6%88%90%EF%BC%8C%E6%94%AF%E6%8C%81%E5%A6%82%E4%B8%8B%E5%8A%9F%E8%83%BD%EF%BC%9A</a></p>

<ul>
<li>对象自动映射</li>
<li>多类型支持</li>
<li>多重映射支持</li>
<li>映射字段自定义支持</li>
</ul>


<h3>Http网络接口操作</h3>

<p>基于开源库AFNetworking（<a href="https://github.com/AFNetworking/AFNetworking%EF%BC%89%E5%B0%81%E8%A3%85%E7%9A%84%E8%AF%B7%E6%B1%82%E7%B1%BB%EF%BC%9A">https://github.com/AFNetworking/AFNetworking%EF%BC%89%E5%B0%81%E8%A3%85%E7%9A%84%E8%AF%B7%E6%B1%82%E7%B1%BB%EF%BC%9A</a>
 - TTIHttpClient处理所有接口请求和操作
 - TTIRequest处理网络请求信息
 - TTIResponse处理网络返回数据信息</p>

<h3>TCP Socket通信操作</h3>

<p>基于开源库CocoaAsyncSocket（<a href="https://github.com/robbiehanson/CocoaAsyncSocket%EF%BC%89%E5%B0%81%E8%A3%85%E7%9A%84%E8%AF%B7%E6%B1%82%E7%B1%BB">https://github.com/robbiehanson/CocoaAsyncSocket%EF%BC%89%E5%B0%81%E8%A3%85%E7%9A%84%E8%AF%B7%E6%B1%82%E7%B1%BB</a>
 - TTISocketClient处理tcp连接、断开、重连、信息发送和粘包等处理
 - TTISocketRequest处理发送出去的帧信息
 - TTISocketResponse处理接受到的帧信息</p>

<h3>网络状况判断</h3>

<ul>
<li>判断是否有网、是否为2G/3G环境、是否为WIFI环境</li>
<li>网络切换时的通知发送</li>
<li>处理方式一：使用datatify处理（<a href="http://huytd.github.io/datatify/%EF%BC%89">http://huytd.github.io/datatify/%EF%BC%89</a></li>
<li>处理方式二：使用AFNetworkReachabilityManager处理</li>
<li>处理方式三：使用Reachability处理</li>
</ul>


<hr />

<h2>第三方平台</h2>

<h3>分享</h3>

<ul>
<li>新浪、腾讯微博、qq控件、qq好友、朋友圈、微信好友、邮件等使用share sdk 进行分享，可分包下载平台支持库</li>
<li>文本、图片、连接和应用的分享</li>
<li>第三方登录（微信平台需要申请）</li>
</ul>


<h3>支付</h3>

<ul>
<li>支付宝</li>
<li>银联</li>
<li>建行</li>
<li>iOS应用内支付</li>
<li>&hellip;</li>
</ul>


<h3>地图</h3>

<ul>
<li>百度</li>
<li>谷歌</li>
<li>高德</li>
</ul>


<h3>统计</h3>

<ul>
<li>使用友盟</li>
<li>数据统计</li>
<li>自定义事件统计</li>
<li>错误分析</li>
</ul>


<h3>推送</h3>

<ul>
<li>极光</li>
<li>信鸽</li>
<li>个推</li>
</ul>


<p>推送中需注意的事项：</p>

<ul>
<li>角标问题</li>
<li>程序在前台收到推送和在后台收到推送</li>
<li>标签和别名</li>
<li>注销推送</li>
</ul>


<hr />

<h2>常用开源库</h2>

<h3>AFNetworking网络</h3>

<ul>
<li>优秀网络框架库</li>
</ul>


<h3>SVProgressHUD和SVPullToRefresh</h3>

<ul>
<li>提示语</li>
<li>列表刷新加载</li>
</ul>


<h3>YLGIFImage</h3>

<ul>
<li>GIF显示</li>
</ul>


<h3>SDWebimage加载图片</h3>

<ul>
<li>网络图片加载</li>
</ul>


<h3>OpenUDID</h3>

<ul>
<li>第三方设备唯一标识符</li>
</ul>


<h3>JSONModel</h3>

<ul>
<li>数据映射工具</li>
</ul>


<h3>iCarousel常用转动效果</h3>

<ul>
<li>各种炫酷视图切换效果</li>
</ul>


<h3>FTCoreText富文本排版</h3>

<ul>
<li>以html标签的形式加载富文本</li>
</ul>


<h3>VVDoucumenter代码注释工具</h3>

<ul>
<li>优秀代码注释工具</li>
</ul>


<hr />

<h2>TODO</h2>

<ol>
<li>iOS代码库使用.a文件生成</li>
<li>完善iOS代码库内容</li>
<li>整理和清晰代码库提交流程和审核流程</li>
<li>使用iOS代码库，创建项目模板工程</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS代码库维护流程说明]]></title>
    <link href="http://foxbabe.github.com/blog/20141102/iosdai-ma-ku-wei-hu-liu-cheng-shuo-ming.html/"/>
    <updated>2014-11-02T23:38:33+08:00</updated>
    <id>http://foxbabe.github.com/blog/20141102/iosdai-ma-ku-wei-hu-liu-cheng-shuo-ming</id>
    <content type="html"><![CDATA[<h2>说明</h2>

<h3>版本信息</h3>

<ul>
<li>2014.08.01 V1.0 创建iOS代码库维护流程说明初版</li>
</ul>


<h3>文档目的</h3>

<ul>
<li>约定代码库提交流程，方便后期代码库的补充</li>
<li>约定代码库审核流程，保证提交代码质量</li>
<li>问题反馈方式，便于代码库完善</li>
</ul>


<h3>文档简介</h3>

<p>文档主要从四个方面来阐述iOS代码库维护流程：</p>

<ol>
<li>代码提交流程说明，阐述代码提交时需要提交的具体内容和注意事项；</li>
<li>代码审核流程说明，阐述代码审核的主要内容和标准；</li>
<li>代码库完善方式，通过反馈bug和提修改意见进行代码库的完善；</li>
<li>代码库分享，技术点实现讨论和新增代码分享</li>
</ol>


<h3>角色说明</h3>

<table>
<thead>
<tr>
<th style="text-align:center;"> 角色类型       </th>
<th style="text-align:center;">  简称     </th>
<th style="text-align:center;"> 组成成员       </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> 代码库提交人员 </td>
<td style="text-align:center;"> Submiter  </td>
<td style="text-align:center;"> iOS工程师      </td>
</tr>
<tr>
<td style="text-align:center;"> 代码库审核人员 </td>
<td style="text-align:center;"> Reviewer  </td>
<td style="text-align:center;"> 代码库审核小组 </td>
</tr>
<tr>
<td style="text-align:center;"> 代码库维护人员 </td>
<td style="text-align:center;"> Modifier  </td>
<td style="text-align:center;"> 代码库维护小组 </td>
</tr>
</tbody>
</table>


<hr />

<h2>代码提交流程</h2>

<h3>提交流程步骤说明</h3>

<p>代码提交流程主要分为如下几个步骤：</p>

<ol>
<li>控件背景描述</li>
<li>控件介绍</li>
<li>编写控件代码</li>
<li>编写使用Demo</li>
<li>功能性和兼容性测试</li>
<li>提交审核</li>
</ol>


<h3>控件背景描述</h3>

<p>代码控件产生的背景描述，阐述在实际项目背景下，基于什么需求来和考虑来编写待提交的代码控件。</p>

<h3>控件主要功能介绍</h3>

<p>控件的主要功能说明，阐述控件的主要功能以及控件的特点。</p>

<ul>
<li>版本号</li>
<li>兼容性</li>
<li>平台</li>
<li>功能说明</li>
</ul>


<h3>控件代码编写</h3>

<p>按照iOS编码规范编写控件代码，录入代码库的控件统一以TTI开头，代表(3ti)公司版权代码。</p>

<h3>使用Demo编写</h3>

<p>编写测试Demo，在Demo中介绍控件的使用方式和主要特性。</p>

<ul>
<li>在Demo中展现控件的特性</li>
<li>介绍控件的具体使用方法</li>
<li>说明控件使用需要注意的事项</li>
</ul>


<h3>功能和兼容性测试</h3>

<ul>
<li>保证提交的控件和Demo功能正常</li>
<li>对于支持的不同系统进行测试</li>
</ul>


<h3>提交审核</h3>

<pre><code>提交审核时将下述资料打包压缩，发送到iOS代码库审核小组邮箱：
1. 代码控件
2. 测试Demo
3. 控件说明
</code></pre>

<p>控件说明模板：</p>

<pre><code>版本号：V1.0

功能说明：
TTIXXXX控件主要用....

注意事项：
1、....
2、....

测试环境：
Xcode 5.0, iOS 6.0及以上
</code></pre>

<hr />

<h2>代码审核流程</h2>

<h3>审核流程步骤说明</h3>

<p>代码审核流程主要分为如下几个步骤：</p>

<ol>
<li>提交资料审核</li>
<li>编码规范审核</li>
<li>控件源码审核</li>
<li>控件Demo审核</li>
<li>审核反馈</li>
<li>提交到代码库</li>
</ol>


<h3>提交资料审核</h3>

<pre><code>提交资料审核，主要审核Submiter提交的代码资料是否按照要求的内容提交，是否包含代码控件、测试Demo和控件说明文件。
</code></pre>

<h3>编码规范审核</h3>

<pre><code>编码规范审核，按照iOS编码规范文档，对提供的代码控件进行命名规范、编码规范等审核。对于与iOS不符合的地方，Reviewer有义务将审核不通过的内容反馈给Submiter。
</code></pre>

<h3>控件源码审核</h3>

<pre><code>控件源码审核主要是从功能实现方式和代码逻辑，以及代码的简易性和易用性上进行核查。Reviewer对于提交的代码如果有较好的实现方式或源码中存在明显的逻辑问题时，需要记录后进行反馈。
</code></pre>

<h3>测试Demo审核</h3>

<pre><code>测试Demo审核，主要从以下几个方面进行审核：
1、测试Demo在指定的测试环境下是否能正常运行；
2、测试Demo运行起来，与描述的功能是否一致;
3、测试Demo中是否较好和完整的展示了控件使用的方式；
4、测试Demo在指定的不同系统版本号下是否运行正常；
</code></pre>

<h3>审核反馈</h3>

<pre><code>Reviewer通过上述审核后，需要给到Submiter审核结果。
1、如审核通过，Reviewer需要将控件提交给Modifier添加到代码库，并且邮件告知Submiter审核通过；
2、如审核失败，Reviewer需要清晰反馈具体的审核失败的原因，邮件告知Submiter，待Submiter完善后再次进行提交审核。
</code></pre>

<h3>更新到代码库</h3>

<pre><code>控件审核通过后，统一由Modifier将控件添加到iOS代码库和iOS模板工程中。
</code></pre>

<hr />

<h2>代码库完善</h2>

<p>代码库完善主要分为三个方面：问题或bug反馈、完善意见处理和iOS代码库维护。</p>

<h3>问题或bug反馈</h3>

<pre><code>对于iOS代码库中存在的问题和bug，使用者可发送邮件给到代码库维护小组，主要从下面几个方面描述问题或bug：
1、是否为必先bug
2、bug等级
    A:严重bug（会造成程序奔溃或无法运行）
    B:中等bug（功能存在异常，能满足基本要求，但是存在缺陷）
    C:轻微bug（界面布局层面，如布局有问题，展示的字体大小颜色不对等）
3、bug产生的条件是什么
</code></pre>

<h3>完善意见处理</h3>

<pre><code>所有工程师都有提出完善意见的权利，完善意见主要分为如下几个方面：
1、项目中经常使用到，希望能处理为控件的形式同意处理；
2、项目中不经常使用，但是一旦设计之前没研究过的开发者需要进过较长时间才能处理的问题，对于这些也可以建议纳入iOS代码库中；
3、提交代码和开发效率的建议
4、.....
</code></pre>

<h3>iOS代码库维护</h3>

<pre><code>iOS代码库统一由代码维护小组进行维护和修改，对于反馈的完善意见，也可分配相应的自愿的iOS工程师进行编写控件的流程进行处理。
</code></pre>

<hr />

<h2>代码库分享交流</h2>

<pre><code>iOS代码库分享，当代码库新纳入的控件数量超过10个时，由代码库维护小组安排安排，进行代码库分享交流。
</code></pre>
]]></content>
  </entry>
  
</feed>
